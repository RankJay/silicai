import store from "@/store";
import styles from "@/styles/share.module.css";
import { useRouter } from "next/router";
import { useEffect, useState } from "react";

const ShareButton = () => {
  const router = useRouter();
  const { asPath } = router;
  const url = new URL(asPath, window.location.origin);

  const copyToClipboard = () => {
    navigator.clipboard.writeText(url.toString());
    const tooltip = document.getElementById(styles.tooltip) as HTMLElement;
    tooltip.style.display = "block";
    setTimeout(() => {
        tooltip.style.display = "none";
    }, 1000);
  };
  return (
    <div id="copybtn" className={styles.container}>
      <div id={styles.tooltip} className={styles.tooltip}>
        Link Copied!
      </div>
      <button className={styles.shareButton} onClick={copyToClipboard}>
        <svg
          xmlns="http://www.w3.org/2000/svg"
          width="24px"
          height="24px"
          viewBox="0 0 24 24"
          version="1.1"
          fill="white"
        >
          <g id="surface1">
            <path d="M 6.074219 2.085938 C 4.03125 2.5 2.476562 4.0625 2.085938 6.109375 C 1.976562 6.664062 1.976562 17.335938 2.085938 17.890625 C 2.476562 19.945312 4.054688 21.523438 6.109375 21.914062 C 6.664062 22.023438 17.335938 22.023438 17.890625 21.914062 C 19.945312 21.523438 21.523438 19.945312 21.914062 17.890625 C 22.015625 17.339844 22.015625 13.855469 21.914062 13.601562 C 21.601562 12.851562 20.511719 12.804688 20.117188 13.523438 C 20.046875 13.644531 20.035156 13.921875 20.011719 15.585938 C 19.976562 17.710938 19.976562 17.726562 19.65625 18.375 C 19.402344 18.890625 18.859375 19.425781 18.324219 19.679688 C 17.625 20.011719 17.992188 19.992188 12 19.992188 C 7.609375 19.992188 6.539062 19.976562 6.328125 19.925781 C 5.480469 19.71875 4.679688 19.082031 4.320312 18.328125 C 3.988281 17.625 4.007812 17.992188 4.007812 12 C 4.007812 6.007812 3.988281 6.375 4.320312 5.671875 C 4.574219 5.136719 5.109375 4.597656 5.625 4.339844 C 6.308594 4.003906 6.171875 4.015625 9.425781 3.988281 L 12.359375 3.960938 L 12.53125 3.84375 C 12.628906 3.777344 12.765625 3.640625 12.835938 3.542969 C 12.945312 3.378906 12.960938 3.3125 12.960938 3 C 12.960938 2.6875 12.945312 2.621094 12.835938 2.457031 C 12.765625 2.359375 12.628906 2.222656 12.53125 2.15625 L 12.355469 2.039062 L 9.378906 2.03125 C 7.011719 2.023438 6.332031 2.035156 6.074219 2.085938 Z M 6.074219 2.085938 " />
            <path d="M 15.65625 3.0625 C 15.429688 3.132812 15.125 3.449219 15.054688 3.683594 C 15.019531 3.8125 15 4.222656 15 4.894531 L 15 5.90625 L 14.304688 5.90625 C 11.992188 5.90625 10.132812 6.519531 8.875 7.707031 C 8.054688 8.476562 7.414062 9.648438 7.121094 10.921875 C 7 11.441406 6.941406 12.824219 7.03125 13.203125 C 7.148438 13.738281 7.714844 14.101562 8.222656 13.964844 C 8.5625 13.875 8.695312 13.753906 9.003906 13.257812 C 9.867188 11.84375 11.289062 11.117188 13.546875 10.921875 C 14.164062 10.871094 14.644531 10.859375 14.855469 10.902344 L 15 10.929688 L 15 12.066406 C 15 13.191406 15 13.199219 15.121094 13.445312 C 15.328125 13.859375 15.746094 14.0625 16.21875 13.964844 L 16.476562 13.914062 L 19.144531 11.257812 C 20.949219 9.453125 21.835938 8.539062 21.894531 8.414062 C 21.941406 8.3125 21.984375 8.125 21.984375 7.992188 C 21.984375 7.5 22.046875 7.5625 19.210938 5.289062 C 17.785156 4.148438 16.523438 3.164062 16.410156 3.109375 C 16.1875 2.992188 15.929688 2.976562 15.65625 3.0625 Z M 15.65625 3.0625 " />
          </g>
        </svg>
      </button>
    </div>
  );
};

export default ShareButton;
